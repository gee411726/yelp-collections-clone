{"ast":null,"code":"import _classCallCheck from\"/Users/bgee/Desktop/Web App Projects/yelp-collections-clone-project/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/Users/bgee/Desktop/Web App Projects/yelp-collections-clone-project/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _assertThisInitialized from\"/Users/bgee/Desktop/Web App Projects/yelp-collections-clone-project/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/assertThisInitialized\";import _inherits from\"/Users/bgee/Desktop/Web App Projects/yelp-collections-clone-project/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import _createSuper from\"/Users/bgee/Desktop/Web App Projects/yelp-collections-clone-project/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{jsx as _jsx}from\"react/jsx-runtime\";import React from'react';import{getDetails as _getDetails}from'../../utils/googleApiHelpers';import styles from'./styles.module.css';import axios from'axios';export var Detail=/*#__PURE__*/function(_React$Component){_inherits(Detail,_React$Component);var _super=_createSuper(Detail);function Detail(props,context){var _this;_classCallCheck(this,Detail);_this=_super.call(this,props,context);_this.closeDetails=function(){_this.setState({showDetails:false,place:undefined});};_this.deletePlaceFromCollection=function(){if(window.confirm(\"confirm you want to delete this place from the collection\")){var request={collectionName:_this.props.currentCollectionName,place_id:_this.props.placeId};axios.post('http://localhost:5000/collections/delete/place',request).then(function(res){return console.log(res.data);}).catch(function(err){return console.log(err);});window.location='/';}};_this.showDetails=_this.showDetails.bind(_assertThisInitialized(_this));_this.closeDetails=_this.closeDetails.bind(_assertThisInitialized(_this));_this.deletePlaceFromCollection=_this.deletePlaceFromCollection.bind(_assertThisInitialized(_this));_this.state={place:{},location:{},showDetails:false};return _this;}_createClass(Detail,[{key:\"componentDidMount\",value:function componentDidMount(){if(this.props.map){this.getDetails(this.props.map);}}},{key:\"componentDidUpdate\",value:function componentDidUpdate(prevProps,prevState){// getDetails sets state to place that is returned from function\n// showDetails of that place after we get it\nif(this.props.map&&(prevProps.map!==this.props.map||prevProps.placeId!==this.props.placeId)){this.getDetails(this.props.map);this.setState({showDetails:true});}// showDetails if prev place differs from current \nif(this.state.place&&prevState.place!==this.state.place){this.setState({showDetails:true});// hideDetails if we changed to no place in state\n}else if(!this.state.place&&prevState.place!==this.state.place){this.setState({showDetails:false,place:{}});}}},{key:\"getDetails\",value:function getDetails(map){var _this2=this;var google=this.props.google;var placeId=this.props.placeId;if(placeId){_getDetails(google,map,placeId).then(function(place){var location=place.geometry.location;var loc={lat:location.lat(),lng:location.lng()};_this2.setState({place:place,location:loc});}).catch(function(err){return console.log(\"error: \",err);});}}},{key:\"renderPhotos\",value:function renderPhotos(place){if(!place.photos||place.photos.length===0)return;var cfg={maxWidth:100,maxHeight:100};return/*#__PURE__*/_jsx(\"div\",{className:styles.photoStrip,children:place.photos.map(function(p){var url=\"\".concat(p.getUrl(cfg),\".png\");return/*#__PURE__*/_jsx(\"img\",{src:url,alt:\"unable to find img\"},url);})});}},{key:\"showDetails\",value:function showDetails(){var place=this.state.place;if(this.state.showDetails===true&&'place_id'in this.state.place){return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"button\",{className:styles.closeDetail,onClick:this.closeDetails,children:/*#__PURE__*/_jsx(\"h1\",{children:\"X\"})}),/*#__PURE__*/_jsxs(\"div\",{className:styles.body,children:[/*#__PURE__*/_jsx(\"h2\",{children:place.name}),/*#__PURE__*/_jsxs(\"h2\",{children:[\"Address: \",place.formatted_address]}),/*#__PURE__*/_jsxs(\"h2\",{children:[\"Current Status: \",place.business_status]}),/*#__PURE__*/_jsxs(\"h2\",{children:[\"Phone Number: \",place.formatted_phone_number]}),/*#__PURE__*/_jsx(\"h2\",{children:/*#__PURE__*/_jsx(\"u\",{children:/*#__PURE__*/_jsx(\"a\",{href:place.website,children:\"Website\"})})}),/*#__PURE__*/_jsxs(\"h2\",{children:[\"Comments: \",this.props.DBPlace.comments]}),this.renderPhotos(this.state.place)]}),/*#__PURE__*/_jsx(\"button\",{onClick:this.deletePlaceFromCollection,children:\"Delete from collection\"})]});}else if(this.state.showDetails===true&&this.state.place===undefined){return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"button\",{className:styles.closeDetail,onClick:this.closeDetails,children:/*#__PURE__*/_jsx(\"h1\",{children:\"X\"})}),/*#__PURE__*/_jsx(\"h2\",{children:\"There are currently no places in this collection\"})]});}}},{key:\"render\",value:function render(){return/*#__PURE__*/_jsx(\"div\",{className:styles.details,children:this.showDetails()});}}]);return Detail;}(React.Component);export default Detail;","map":{"version":3,"sources":["/Users/bgee/Desktop/Web App Projects/yelp-collections-clone-project/src/views/Detail/Detail.js"],"names":["React","getDetails","styles","axios","Detail","props","context","closeDetails","setState","showDetails","place","undefined","deletePlaceFromCollection","window","confirm","request","collectionName","currentCollectionName","place_id","placeId","post","then","res","console","log","data","catch","err","location","bind","state","map","prevProps","prevState","google","geometry","loc","lat","lng","photos","length","cfg","maxWidth","maxHeight","photoStrip","p","url","getUrl","closeDetail","body","name","formatted_address","business_status","formatted_phone_number","website","DBPlace","comments","renderPhotos","details","Component"],"mappings":"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","sourcesContent":["\nimport React from 'react'\nimport { getDetails } from '../../utils/googleApiHelpers'\nimport styles from './styles.module.css'\nimport axios from 'axios';\n\nexport class Detail extends React.Component {\n\n  constructor(props, context) {\n    super(props, context)\n\n    this.showDetails = this.showDetails.bind(this);\n    this.closeDetails = this.closeDetails.bind(this);\n    this.deletePlaceFromCollection = this.deletePlaceFromCollection.bind(this);\n\n    this.state = {\n      place: {},\n      location: {},\n      showDetails: false\n    }\n  }\n\n  componentDidMount() {\n    if (this.props.map) {\n      this.getDetails(this.props.map)\n    }\n  }\n\n  componentDidUpdate(prevProps, prevState) {\n    // getDetails sets state to place that is returned from function\n    // showDetails of that place after we get it\n    if (this.props.map &&\n        (prevProps.map !== this.props.map ||\n         prevProps.placeId !== this.props.placeId)) {\n      this.getDetails(this.props.map);\n      this.setState({showDetails: true})\n    }\n    // showDetails if prev place differs from current \n    if (this.state.place && prevState.place !== this.state.place ) {\n      this.setState({showDetails: true})\n    // hideDetails if we changed to no place in state\n    } else if (!this.state.place && prevState.place !== this.state.place) {\n      this.setState({\n        showDetails: false,\n        place: {}\n      })\n    }\n  }\n  \n  getDetails(map) {\n    const { google } = this.props; \n    const placeId = this.props.placeId;\n\n    if (placeId) {\n      getDetails(google, map, placeId)\n      .then((place) => {\n        const {location} = place.geometry; \n        const loc = {\n          lat: location.lat(),\n          lng: location.lng()\n        }\n        this.setState({\n          place: place,\n          location: loc,\n        })\n      })\n      .catch(err => console.log(\"error: \", err))\n    }\n  }\n\n\n  renderPhotos(place) {\n    if (!place.photos || place.photos.length === 0) return;\n\n    const cfg = {maxWidth: 100, maxHeight: 100}\n    return (<div className={styles.photoStrip}>\n      {place.photos.map(p => {\n        const url = `${p.getUrl(cfg)}.png`\n        return (<img key={url} src={url} alt={\"unable to find img\"}/>)\n      })}\n    </div>)\n  }\n\n  showDetails() {\n    const {place} = this.state; \n\n    if (this.state.showDetails === true && 'place_id' in this.state.place) {\n      return (\n        <div>\n          <button className={styles.closeDetail} onClick={this.closeDetails}>\n            <h1>X</h1>\n          </button>\n          <div className={styles.body}>\n            <h2>{place.name}</h2> \n            <h2>Address: {place.formatted_address}</h2>\n            <h2>Current Status: {place.business_status}</h2>\n            <h2>Phone Number: {place.formatted_phone_number}</h2>\n            <h2><u><a href={place.website}>Website</a></u></h2>\n            {<h2>Comments: {this.props.DBPlace.comments}</h2>}\n            {this.renderPhotos(this.state.place)}\n          </div>\n\n          <button onClick={this.deletePlaceFromCollection}>Delete from collection</button>\n        </div>\n      )\n    } else if (this.state.showDetails === true && this.state.place === undefined) {\n        return (\n          <div>\n            <button className={styles.closeDetail} onClick={this.closeDetails}>\n              <h1>X</h1>\n            </button>\n            <h2>There are currently no places in this collection</h2>\n          </div>\n        )\n    }\n  }\n\n  closeDetails = () => {\n    this.setState({\n      showDetails: false,\n      place: undefined\n    })\n  }\n\n  deletePlaceFromCollection = () => {\n    if (window.confirm(\"confirm you want to delete this place from the collection\")) {\n      const request = {\n        collectionName: this.props.currentCollectionName,\n        place_id: this.props.placeId\n      }\n      axios.post('http://localhost:5000/collections/delete/place', request)\n      .then(res => console.log(res.data))\n      .catch(err => console.log(err)); \n  \n      window.location = '/'\n    }\n  }\n\n  render() {\n    return (\n      <div className={styles.details}>\n        {this.showDetails()}\n      </div>\n    )\n  }\n}\n\nexport default Detail"]},"metadata":{},"sourceType":"module"}