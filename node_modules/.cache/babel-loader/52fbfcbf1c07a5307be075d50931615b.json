{"ast":null,"code":"export function searchNearby(google, map, request) {\n  var infoWindow = new google.maps.InfoWindow();\n  geoLocateUser(google, map, infoWindow);\n  initAutocomplete(google, map, infoWindow);\n  return new Promise((resolve, reject) => {\n    const service = new google.maps.places.PlacesService(map);\n    service.nearbySearch(request, (results, status, pagination) => {\n      if (status == google.maps.places.PlacesServiceStatus.OK) {\n        /*\n        for (var i = 0; i < results.length; i++) {\n          if (i < 4) {\n            createMarker(results[i]);\n            console.log(results[i])\n          } \n        }\n        */\n        resolve(results, pagination);\n      } else {\n        reject(results, status);\n      }\n    });\n\n    function createMarker(place) {\n      if (!place.geometry || !place.geometry.location) return;\n      const marker = new google.maps.Marker({\n        map,\n        position: place.geometry.location\n      });\n      google.maps.event.addListener(marker, \"click\", function (markers, i) {\n        return function () {\n          var infoWindow = new google.maps.InfoWindow();\n          var mainType = markers[i].getAttribute(\"types[0]\");\n          var name = markers[i].getAttribute(\"name\");\n          var address = markers[i].getAttribute(\"address\");\n          var html = \"<b>\" + name + \"</b> <br/>\" + address + \"<b>\" + mainType + \"<b> <br/>\";\n          infoWindow.setContent(html);\n          infoWindow.open(map, marker);\n        };\n      });\n    }\n  });\n}\nexport function initAutocomplete(google, map) {\n  const input = document.getElementById(\"pac-input\");\n  const searchBox = new google.maps.places.SearchBox(input);\n  map.controls[google.maps.ControlPosition.TOP_CENTER].push(input); // Bias the SearchBox results towards current map's viewport.\n\n  map.addListener(\"bounds_changed\", () => {\n    searchBox.setBounds(map.getBounds());\n    google.maps.event.trigger(map, 'resize');\n  });\n  let markers = []; // Listen for the event fired when the user selects a prediction and retrieve\n  // more details for that place.\n\n  searchBox.addListener(\"places_changed\", () => {\n    const places = searchBox.getPlaces();\n\n    if (places.length == 0) {\n      return;\n    } // Clear out the old markers.\n\n\n    markers.forEach(marker => {\n      marker.setMap(null);\n    });\n    markers = []; // For each place, get the icon, name and location.\n\n    const bounds = new google.maps.LatLngBounds();\n\n    for (let i = 0; i < places.length; i++) {\n      var place = places[i];\n      console.log(place);\n\n      if (!place.geometry || !place.geometry.location) {\n        console.log(\"Returned place contains no geometry\");\n        return;\n      }\n\n      const icon = {\n        url: place.icon,\n        size: new google.maps.Size(71, 71),\n        origin: new google.maps.Point(0, 0),\n        anchor: new google.maps.Point(17, 34),\n        scaledSize: new google.maps.Size(25, 25)\n      }; // Create a marker for each place.\n\n      createMarker(place);\n\n      if (place.geometry.viewport) {\n        // Only geocodes have viewport.\n        bounds.union(place.geometry.viewport);\n      } else {\n        bounds.extend(place.geometry.location);\n      }\n    }\n\n    map.fitBounds(bounds);\n  });\n\n  function createMarker(place) {\n    if (!place.geometry || !place.geometry.location) return;\n    const marker = new google.maps.Marker({\n      map,\n      position: place.geometry.location\n    });\n    google.maps.event.addListener(marker, \"click\", function () {\n      return function () {\n        marker.infoWindow = new google.maps.InfoWindow();\n        var mainType = place.types[0];\n        var name = place.name;\n        var address = place.formatted_address;\n        var phoneNumber = place.formatted_phone_number;\n        var html = \"<b>\" + name + \"</b> <br/> <b> address: \" + address + \"</b> <br/> <b>business: \" + mainType + \"</b> <br/> <b> phone #: \" + phoneNumber + \"</b> <br/> <b>\";\n        map.panTo(marker.getPosition());\n        marker.infoWindow.setContent(html);\n        marker.infoWindow.open(map, marker);\n      }(marker);\n    });\n  }\n}\nexport function geoLocateUser(google, map) {\n  var infoWindow = new google.maps.InfoWindow();\n  const locationButton = document.createElement(\"button\");\n  locationButton.textContent = \"Pan to Current Location\";\n  locationButton.classList.add(\"custom-map-control-button\");\n  map.controls[google.maps.ControlPosition.TOP_CENTER].push(locationButton);\n  locationButton.addEventListener(\"click\", () => {\n    // Try HTML5 geolocation.\n    if (navigator.geolocation) {\n      navigator.geolocation.getCurrentPosition(position => {\n        const pos = {\n          lat: position.coords.latitude,\n          lng: position.coords.longitude\n        };\n        infoWindow.setPosition(pos);\n        infoWindow.setContent(\"Your location\"); //infoWindow.open(map);\n\n        map.setCenter(pos);\n      }, () => {\n        handleLocationError(true, infoWindow, map.getCenter());\n      });\n    } else {\n      // Browser doesn't support Geolocation\n      handleLocationError(false, infoWindow, map.getCenter());\n    }\n  });\n\n  function handleLocationError(browserHasGeolocation, infoWindow, pos) {\n    infoWindow.setPosition(pos);\n    infoWindow.setContent(browserHasGeolocation ? \"Error: The Geolocation service failed.\" : \"Error: Your browser doesn't support geolocation.\");\n    infoWindow.open(map);\n  }\n}\n/*\n * getDetails\n *\n * Get details from the Google API about one specific place.\n */\n\nexport function getDetails(google, map, placeId) {\n  return new Promise((resolve, reject) => {\n    const service = new google.maps.places.PlacesService(map);\n    const request = {\n      placeId\n    };\n    service.getDetails(request, (place, status) => {\n      if (status !== google.maps.places.PlacesServiceStatus.OK) {\n        return reject(status);\n      } else {\n        resolve(place);\n      }\n    });\n  });\n}\n/*\nexport function searchQuery(google, map) {\n  const service = new google.maps.places.PlacesService(map);\n  var infoWindow = new google.maps.infoWindow();\n\n  const request = { // turn into a state, use onChange -> \n    query: \"Museum of Contemporary Art\",\n    fields: [\"name\"],\n  };\n\n  service.findPlaceFromQuery(request, (results, status) => {\n    if (status === google.maps.places.PlacesServiceStatus.OK && results) {\n      for (let i = 0; i < results.length; i++) {\n        createMarker(results[i]);\n      }\n      map.setCenter(results[0].geometry.location);\n    }\n  });\n}\n*/\n// This example adds a search box to a map, using the Google Place Autocomplete\n// feature. People can enter geographical searches. The search box will return a\n// pick list containing a mix of places and predicted search terms.\n// This example requires the Places library. Include the libraries=places\n// parameter when you first load the API. For example:\n// <script src=\"https://maps.googleapis.com/maps/api/js?key=YOUR_API_KEY&libraries=places\">","map":{"version":3,"sources":["/Users/bgee/Desktop/Web App Projects/mern-exercise-tracker/src/utils/googleApiHelpers.js"],"names":["searchNearby","google","map","request","infoWindow","maps","InfoWindow","geoLocateUser","initAutocomplete","Promise","resolve","reject","service","places","PlacesService","nearbySearch","results","status","pagination","PlacesServiceStatus","OK","createMarker","place","geometry","location","marker","Marker","position","event","addListener","markers","i","mainType","getAttribute","name","address","html","setContent","open","input","document","getElementById","searchBox","SearchBox","controls","ControlPosition","TOP_CENTER","push","setBounds","getBounds","trigger","getPlaces","length","forEach","setMap","bounds","LatLngBounds","console","log","icon","url","size","Size","origin","Point","anchor","scaledSize","viewport","union","extend","fitBounds","types","formatted_address","phoneNumber","formatted_phone_number","panTo","getPosition","locationButton","createElement","textContent","classList","add","addEventListener","navigator","geolocation","getCurrentPosition","pos","lat","coords","latitude","lng","longitude","setPosition","setCenter","handleLocationError","getCenter","browserHasGeolocation","getDetails","placeId"],"mappings":"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","sourcesContent":["export function searchNearby(google, map, request) {\n  var infoWindow = new google.maps.InfoWindow();\n  geoLocateUser(google, map, infoWindow)\n  initAutocomplete(google, map, infoWindow)\n\n  return new Promise((resolve, reject) => {\n    const service = new google.maps.places.PlacesService(map);\n    service.nearbySearch(request, (results, status, pagination) => {\n      if (status == google.maps.places.PlacesServiceStatus.OK) {\n        /*\n        for (var i = 0; i < results.length; i++) {\n          if (i < 4) {\n            createMarker(results[i]);\n            console.log(results[i])\n          } \n        }\n        */\n        resolve(results, pagination);\n      } else {\n        reject(results, status);\n      }\n    })\n\n    function createMarker(place) {\n      if (!place.geometry || !place.geometry.location) return;\n\n      const marker = new google.maps.Marker({\n        map,\n        position: place.geometry.location,\n      });\n\n      google.maps.event.addListener(marker, \"click\", (function(markers, i) {\n        return function() {\n          var infoWindow = new google.maps.InfoWindow();\n          var mainType = markers[i].getAttribute(\"types[0]\")\n          var name = markers[i].getAttribute(\"name\");\n          var address = markers[i].getAttribute(\"address\");\n          var html = \"<b>\" + name + \"</b> <br/>\" + address + \"<b>\" + mainType + \"<b> <br/>\";\n          infoWindow.setContent(html);\n          infoWindow.open(map, marker);\n        }\n      }))\n    }\n  });\n}\n\nexport function initAutocomplete(google, map) {\n\n  const input = document.getElementById(\"pac-input\")\n  const searchBox = new google.maps.places.SearchBox(input);\n  map.controls[google.maps.ControlPosition.TOP_CENTER].push(input);\n\n  // Bias the SearchBox results towards current map's viewport.\n  map.addListener(\"bounds_changed\", () => {\n    searchBox.setBounds(map.getBounds());\n    google.maps.event.trigger(map, 'resize')\n  });\n  let markers = [];\n  // Listen for the event fired when the user selects a prediction and retrieve\n  // more details for that place.\n  searchBox.addListener(\"places_changed\", () => {\n    const places = searchBox.getPlaces();\n\n    if (places.length == 0) {\n      return;\n    }\n    // Clear out the old markers.\n    markers.forEach((marker) => {\n      marker.setMap(null);\n    });\n    markers = [];\n    // For each place, get the icon, name and location.\n    const bounds = new google.maps.LatLngBounds();\n\n    for (let i = 0; i < places.length; i++) {\n      var place = places[i];\n      console.log(place)\n        if (!place.geometry || !place.geometry.location) {\n          console.log(\"Returned place contains no geometry\");\n          return;\n        }\n        const icon = {\n          url: place.icon,\n          size: new google.maps.Size(71, 71),\n          origin: new google.maps.Point(0, 0),\n          anchor: new google.maps.Point(17, 34),\n          scaledSize: new google.maps.Size(25, 25),\n        };\n        // Create a marker for each place.\n        createMarker(place)\n  \n        if (place.geometry.viewport) {\n          // Only geocodes have viewport.\n          bounds.union(place.geometry.viewport);\n        } else {\n          bounds.extend(place.geometry.location);\n        }\n    }\n\n    map.fitBounds(bounds);\n  });\n\n  function createMarker(place) {\n    if (!place.geometry || !place.geometry.location) return;\n\n    const marker = new google.maps.Marker({\n      map,\n      position: place.geometry.location,\n    });\n\n    google.maps.event.addListener(marker, \"click\", (function() {\n      return function() {\n        marker.infoWindow = new google.maps.InfoWindow();\n        var mainType = place.types[0];\n        var name = place.name;\n        var address = place.formatted_address;\n        var phoneNumber = place.formatted_phone_number;\n        var html = \"<b>\" + name + \"</b> <br/> <b> address: \" + address + \"</b> <br/> <b>business: \" + mainType + \"</b> <br/> <b> phone #: \" + phoneNumber + \"</b> <br/> <b>\" ;\n        \n        map.panTo(marker.getPosition());\n        marker.infoWindow.setContent(html);\n        marker.infoWindow.open(map, marker);\n      }(marker);\n    }))\n  }\n}\n\nexport function geoLocateUser(google, map) {\n  var infoWindow = new google.maps.InfoWindow();\n\n  const locationButton = document.createElement(\"button\");\n  locationButton.textContent = \"Pan to Current Location\";\n  locationButton.classList.add(\"custom-map-control-button\");\n  map.controls[google.maps.ControlPosition.TOP_CENTER].push(locationButton);\n\n  locationButton.addEventListener(\"click\", () => {\n    // Try HTML5 geolocation.\n    if (navigator.geolocation) {\n      navigator.geolocation.getCurrentPosition(\n        (position) => {\n          const pos = {\n            lat: position.coords.latitude,\n            lng: position.coords.longitude,\n          };\n          infoWindow.setPosition(pos);\n          infoWindow.setContent(\"Your location\");\n          //infoWindow.open(map);\n          map.setCenter(pos);\n        },\n        () => {\n          handleLocationError(true, infoWindow, map.getCenter());\n        }\n      );\n    } else {\n      // Browser doesn't support Geolocation\n      handleLocationError(false, infoWindow, map.getCenter());\n    }\n  });\n\n  function handleLocationError(browserHasGeolocation, infoWindow, pos) {\n    infoWindow.setPosition(pos);\n    infoWindow.setContent(\n      browserHasGeolocation\n        ? \"Error: The Geolocation service failed.\"\n        : \"Error: Your browser doesn't support geolocation.\"\n    );\n    infoWindow.open(map);\n  }\n}\n\n\n/*\n * getDetails\n *\n * Get details from the Google API about one specific place.\n */\nexport function getDetails(google, map, placeId) {\n  return new Promise((resolve, reject) => {\n    const service = new google.maps.places.PlacesService(map);\n\n    const request = {\n      placeId\n    }\n\n    service.getDetails(request, (place, status) => {\n      if (status !== google.maps.places.PlacesServiceStatus.OK) {\n        return reject(status);\n      } else {\n        resolve(place);\n      }\n    })\n  })\n}\n/*\nexport function searchQuery(google, map) {\n  const service = new google.maps.places.PlacesService(map);\n  var infoWindow = new google.maps.infoWindow();\n\n  const request = { // turn into a state, use onChange -> \n    query: \"Museum of Contemporary Art\",\n    fields: [\"name\"],\n  };\n\n  service.findPlaceFromQuery(request, (results, status) => {\n    if (status === google.maps.places.PlacesServiceStatus.OK && results) {\n      for (let i = 0; i < results.length; i++) {\n        createMarker(results[i]);\n      }\n      map.setCenter(results[0].geometry.location);\n    }\n  });\n}\n*/\n\n// This example adds a search box to a map, using the Google Place Autocomplete\n// feature. People can enter geographical searches. The search box will return a\n// pick list containing a mix of places and predicted search terms.\n// This example requires the Places library. Include the libraries=places\n// parameter when you first load the API. For example:\n// <script src=\"https://maps.googleapis.com/maps/api/js?key=YOUR_API_KEY&libraries=places\">\n\n\n\n\n"]},"metadata":{},"sourceType":"module"}