{"ast":null,"code":"export function searchNearby(google, map, request) {\n  var infoWindow = new google.maps.infoWindow();\n  return new Promise((resolve, reject) => {\n    const service = new google.maps.places.PlacesService(map);\n    service.nearbySearch(request, (results, status, pagination) => {\n      if (status == google.maps.places.PlacesServiceStatus.OK) {\n        for (var i = 0; i < results.length; i++) {\n          if (i < 4) {\n            createMarker(results[i]);\n            console.log(results[i]);\n          }\n        }\n\n        resolve(results, pagination);\n      } else {\n        reject(results, status);\n      }\n    });\n    geoLocateUser(google, map);\n\n    function createMarker(place) {\n      if (!place.geometry || !place.geometry.location) return;\n      const marker = new google.maps.Marker({\n        map,\n        position: place.geometry.location\n      });\n      google.maps.event.addListener(marker, \"click\", () => {\n        infoWindow.setContent(place.name || \"\");\n        infoWindow.open(map);\n      });\n    }\n\n    function geoLocateUser(google, map) {\n      const locationButton = document.createElement(\"button\");\n      locationButton.textContent = \"Pan to Current Location\";\n      locationButton.classList.add(\"custom-map-control-button\");\n      map.controls[google.maps.ControlPosition.TOP_CENTER].push(locationButton);\n      locationButton.addEventListener(\"click\", () => {\n        // Try HTML5 geolocation.\n        if (navigator.geolocation) {\n          navigator.geolocation.getCurrentPosition(position => {\n            const pos = {\n              lat: position.coords.latitude,\n              lng: position.coords.longitude\n            };\n            infoWindow.setPosition(pos);\n            infoWindow.setContent(\"Your location\"); //infoWindow.open(map);\n\n            map.setCenter(pos);\n          }, () => {\n            handleLocationError(true, infoWindow, map.getCenter());\n          });\n        } else {\n          // Browser doesn't support Geolocation\n          handleLocationError(false, infoWindow, map.getCenter());\n        }\n      });\n\n      function handleLocationError(browserHasGeolocation, infoWindow, pos) {\n        infoWindow.setPosition(pos);\n        infoWindow.setContent(browserHasGeolocation ? \"Error: The Geolocation service failed.\" : \"Error: Your browser doesn't support geolocation.\");\n        infoWindow.open(map);\n      }\n    }\n  });\n}\n/*\n * getDetails\n *\n * Get details from the Google API about one specific place.\n */\n\nexport function getDetails(google, map, placeId) {\n  return new Promise((resolve, reject) => {\n    const service = new google.maps.places.PlacesService(map);\n    const request = {\n      placeId\n    };\n    service.getDetails(request, (place, status) => {\n      if (status !== google.maps.places.PlacesServiceStatus.OK) {\n        return reject(status);\n      } else {\n        resolve(place);\n      }\n    });\n  });\n}\nexport function searchQuery(google, map) {\n  const service = new google.maps.places.PlacesService(map);\n  var infoWindow = new google.maps.infoWindow();\n  const request = {\n    query: \"Museum of Contemporary Art\",\n    fields: [\"name\"]\n  };\n  service.findPlaceFromQuery(request, (results, status) => {\n    if (status === google.maps.places.PlacesServiceStatus.OK && results) {\n      for (let i = 0; i < results.length; i++) {\n        createMarker(results[i]);\n      }\n\n      map.setCenter(results[0].geometry.location);\n    }\n  });\n\n  function createMarker(place) {\n    var infoWindow = new google.maps.infoWindow();\n    if (!place.geometry || !place.geometry.location) return;\n    const marker = new google.maps.Marker({\n      map,\n      position: place.geometry.location\n    });\n    google.maps.event.addListener(marker, \"click\", () => {\n      infoWindow.setContent(place.name || \"\");\n      infoWindow.open(map);\n    });\n  }\n}","map":{"version":3,"sources":["/Users/bgee/Desktop/Web App Projects/mern-exercise-tracker/src/utils/googleApiHelpers.js"],"names":["searchNearby","google","map","request","infoWindow","maps","Promise","resolve","reject","service","places","PlacesService","nearbySearch","results","status","pagination","PlacesServiceStatus","OK","i","length","createMarker","console","log","geoLocateUser","place","geometry","location","marker","Marker","position","event","addListener","setContent","name","open","locationButton","document","createElement","textContent","classList","add","controls","ControlPosition","TOP_CENTER","push","addEventListener","navigator","geolocation","getCurrentPosition","pos","lat","coords","latitude","lng","longitude","setPosition","setCenter","handleLocationError","getCenter","browserHasGeolocation","getDetails","placeId","searchQuery","query","fields","findPlaceFromQuery"],"mappings":"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","sourcesContent":["export function searchNearby(google, map, request) {\n  var infoWindow = new google.maps.infoWindow();\n\n  return new Promise((resolve, reject) => {\n    const service = new google.maps.places.PlacesService(map);\n    service.nearbySearch(request, (results, status, pagination) => {\n      if (status == google.maps.places.PlacesServiceStatus.OK) {\n        for (var i = 0; i < results.length; i++) {\n          if (i < 4) {\n            createMarker(results[i]);\n            console.log(results[i])\n          } \n\n        }\n\n        resolve(results, pagination);\n      } else {\n        reject(results, status);\n      }\n    })\n\n    geoLocateUser(google, map)\n\n    function createMarker(place) {\n      if (!place.geometry || !place.geometry.location) return;\n      const marker = new google.maps.Marker({\n        map,\n        position: place.geometry.location,\n      });\n      google.maps.event.addListener(marker, \"click\", () => {\n        infoWindow.setContent(place.name || \"\");\n        infoWindow.open(map);\n      });\n    }\n\n    function geoLocateUser(google, map) {\n\n      const locationButton = document.createElement(\"button\");\n      locationButton.textContent = \"Pan to Current Location\";\n      locationButton.classList.add(\"custom-map-control-button\");\n      map.controls[google.maps.ControlPosition.TOP_CENTER].push(locationButton);\n    \n      locationButton.addEventListener(\"click\", () => {\n        // Try HTML5 geolocation.\n        if (navigator.geolocation) {\n          navigator.geolocation.getCurrentPosition(\n            (position) => {\n              const pos = {\n                lat: position.coords.latitude,\n                lng: position.coords.longitude,\n              };\n              infoWindow.setPosition(pos);\n              infoWindow.setContent(\"Your location\");\n              //infoWindow.open(map);\n              map.setCenter(pos);\n            },\n            () => {\n              handleLocationError(true, infoWindow, map.getCenter());\n            }\n          );\n        } else {\n          // Browser doesn't support Geolocation\n          handleLocationError(false, infoWindow, map.getCenter());\n        }\n      });\n      function handleLocationError(browserHasGeolocation, infoWindow, pos) {\n        infoWindow.setPosition(pos);\n        infoWindow.setContent(\n          browserHasGeolocation\n            ? \"Error: The Geolocation service failed.\"\n            : \"Error: Your browser doesn't support geolocation.\"\n        );\n        infoWindow.open(map);\n      }\n    }\n  });\n}\n/*\n * getDetails\n *\n * Get details from the Google API about one specific place.\n */\nexport function getDetails(google, map, placeId) {\n  return new Promise((resolve, reject) => {\n    const service = new google.maps.places.PlacesService(map);\n\n    const request = {\n      placeId\n    }\n\n    service.getDetails(request, (place, status) => {\n      if (status !== google.maps.places.PlacesServiceStatus.OK) {\n        return reject(status);\n      } else {\n        resolve(place);\n      }\n    })\n  })\n}\n\nexport function searchQuery(google, map) {\n  const service = new google.maps.places.PlacesService(map);\n  var infoWindow = new google.maps.infoWindow();\n\n  const request = {\n    query: \"Museum of Contemporary Art\",\n    fields: [\"name\"],\n  };\n\n  service.findPlaceFromQuery(request, (results, status) => {\n    if (status === google.maps.places.PlacesServiceStatus.OK && results) {\n      for (let i = 0; i < results.length; i++) {\n        createMarker(results[i]);\n      }\n      map.setCenter(results[0].geometry.location);\n    }\n  });\n\n  function createMarker(place) {\n    var infoWindow = new google.maps.infoWindow();\n    \n    if (!place.geometry || !place.geometry.location) return;\n    const marker = new google.maps.Marker({\n      map,\n      position: place.geometry.location,\n    });\n    google.maps.event.addListener(marker, \"click\", () => {\n      infoWindow.setContent(place.name || \"\");\n      infoWindow.open(map);\n    });\n  }\n}\n\n\n\n"]},"metadata":{},"sourceType":"module"}