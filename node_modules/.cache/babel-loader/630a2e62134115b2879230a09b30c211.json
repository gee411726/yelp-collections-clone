{"ast":null,"code":"import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import ReactDOMServer from'react-dom/server';export function searchNearby(google,map,request){var infoWindow=new google.maps.InfoWindow();initAutocomplete(google,map,infoWindow);return new Promise(function(resolve,reject){var service=new google.maps.places.PlacesService(map);service.nearbySearch(request,function(results,status,pagination){if(status===google.maps.places.PlacesServiceStatus.OK){for(var i=0;i<10;i++){createMarker(google,map,results[i]);}resolve(results,pagination);}else{reject(results,status);}});});}export function initAutocomplete(google,map){var input=document.getElementById(\"pac-input\");var searchBox=new google.maps.places.SearchBox(input);map.controls[google.maps.ControlPosition.TOP_CENTER].push(input);// Bias the SearchBox results towards current map's viewport.\nmap.addListener(\"bounds_changed\",function(){searchBox.setBounds(map.getBounds());google.maps.event.trigger(map,'resize');});var markers=[];// Listen for the event fired when the user selects a prediction and retrieve\n// more details for that place.\nsearchBox.addListener(\"places_changed\",function(){var places=searchBox.getPlaces();if(places.length===0){return;}// Clear out the old markers.\nmarkers.forEach(function(marker){marker.setMap(null);});markers=[];// For each place, get the icon, name and location.\nvar bounds=new google.maps.LatLngBounds();for(var i=0;i<places.length;i++){var place=places[i];console.log(place);if(!place.geometry||!place.geometry.location){console.log(\"Returned place contains no geometry\");return;}// Create a marker for each place.\ncreateMarker(google,map,place);if(place.geometry.viewport){// Only geocodes have viewport.\nbounds.union(place.geometry.viewport);}else{bounds.extend(place.geometry.location);}}map.fitBounds(bounds);});}export function createMarkers(google,map,places,collectionsList){if(!places||places.length===0){return;}else{//create empty LatLngBounds object   \nvar bounds=new google.maps.LatLngBounds();for(var i=0;i<places.length;i++){createMarker(google,map,places[i],collectionsList);if(places[i].location){if(!isNaN(places[i].location.lat&&!isNaN(places[i].location.lng))){bounds.extend(new google.maps.LatLng(places[i].location));}}}//now fit the map to the newly inclusive bounds\nmap.fitBounds(bounds);//(optional) restore the zoom level after the map is done scaling\nvar listener=google.maps.event.addListener(map,\"idle\",function(){map.setZoom(14);google.maps.event.removeListener(listener);});}}export function createMarker(google,map,place,collectionsList){var position;if(!place.geometry){if(!place.location){return;}position=place.location;console.log(\"Place.location\",position);}else{position=place.geometry.location;console.log(place);}//if (!place.geometry || !place.geometry.location) return;\nvar marker=new google.maps.Marker({map:map,position:position});google.maps.event.addListener(marker,\"click\",function(){return function(){marker.infoWindow=new google.maps.InfoWindow();var html=ReactDOMServer.renderToStaticMarkup(searchDetails(place,collectionsList));map.panTo(marker.getPosition());marker.infoWindow.setContent(html);marker.infoWindow.open(map,marker);}(marker);});return{position:position};}export function searchDetails(place,collections){function returnCorrectLocation(place){if(place.geometry!==undefined){return/*#__PURE__*/_jsxs(\"div\",{children:[\"Location (Lat, Lng): (\",place.geometry.location.lat(),\", \",place.geometry.location.lng(),\")\"]});}else if(place.location!==undefined){return/*#__PURE__*/_jsxs(\"div\",{children:[\"Location (Lat, Lng): (\",place.location.lat,\", \",place.location.lng,\")\"]});}}function returnCorrectWebsite(place){if(place.website){return/*#__PURE__*/_jsxs(\"div\",{children:[\"Website: \",place.website,/*#__PURE__*/_jsx(\"br\",{})]});}return;}return/*#__PURE__*/_jsxs(\"div\",{children:[console.log(\"place info in search Details: \",place),/*#__PURE__*/_jsxs(\"div\",{children:[\"Place Name: \",place.name]}),returnCorrectWebsite(place),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"div\",{children:\"Copy info below and paste in \\\"Add to Place Collection\\\" tab to add to your collection\"}),/*#__PURE__*/_jsxs(\"div\",{children:[\"Place_id: \",place.place_id]}),returnCorrectLocation(place)]});}export function geoLocateUser(google,map){var infoWindow=new google.maps.InfoWindow();var locationButton=document.createElement(\"button\");locationButton.textContent=\"Pan to Current Location\";locationButton.classList.add(\"custom-map-control-button\");map.controls[google.maps.ControlPosition.TOP_CENTER].push(locationButton);locationButton.addEventListener(\"click\",function(){// Try HTML5 geolocation.\nif(navigator.geolocation){navigator.geolocation.getCurrentPosition(function(position){var pos={lat:position.coords.latitude,lng:position.coords.longitude};infoWindow.setPosition(pos);infoWindow.setContent(\"Your location\");//infoWindow.open(map);\nmap.setCenter(pos);},function(){handleLocationError(true,infoWindow,map.getCenter());});}else{// Browser doesn't support Geolocation\nhandleLocationError(false,infoWindow,map.getCenter());}});function handleLocationError(browserHasGeolocation,infoWindow,pos){infoWindow.setPosition(pos);infoWindow.setContent(browserHasGeolocation?\"Error: The Geolocation service failed.\":\"Error: Your browser doesn't support geolocation.\");infoWindow.open(map);}}/*\n * getDetails\n * Get details from the Google API about one specific place.\n */export function getDetails(google,map,placeId){return new Promise(function(resolve,reject){var service=new google.maps.places.PlacesService(map);var request={placeId:placeId};service.getDetails(request,function(place,status){if(status!==google.maps.places.PlacesServiceStatus.OK){console.log(\"status!== OK in getDetails. Request is here: \",request);return reject(status);}else{resolve(place);}});});}","map":{"version":3,"sources":["/Users/bgee/Desktop/Web App Projects/yelp-collections-clone-project/src/utils/googleApiHelpers.js"],"names":["ReactDOMServer","searchNearby","google","map","request","infoWindow","maps","InfoWindow","initAutocomplete","Promise","resolve","reject","service","places","PlacesService","nearbySearch","results","status","pagination","PlacesServiceStatus","OK","i","createMarker","input","document","getElementById","searchBox","SearchBox","controls","ControlPosition","TOP_CENTER","push","addListener","setBounds","getBounds","event","trigger","markers","getPlaces","length","forEach","marker","setMap","bounds","LatLngBounds","place","console","log","geometry","location","viewport","union","extend","fitBounds","createMarkers","collectionsList","isNaN","lat","lng","LatLng","listener","setZoom","removeListener","position","Marker","html","renderToStaticMarkup","searchDetails","panTo","getPosition","setContent","open","collections","returnCorrectLocation","undefined","returnCorrectWebsite","website","name","place_id","geoLocateUser","locationButton","createElement","textContent","classList","add","addEventListener","navigator","geolocation","getCurrentPosition","pos","coords","latitude","longitude","setPosition","setCenter","handleLocationError","getCenter","browserHasGeolocation","getDetails","placeId"],"mappings":"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","sourcesContent":["import ReactDOMServer from 'react-dom/server';\n\nexport function searchNearby(google, map, request) {\n  var infoWindow = new google.maps.InfoWindow();\n  initAutocomplete(google, map, infoWindow)\n\n  return new Promise((resolve, reject) => {\n    const service = new google.maps.places.PlacesService(map);\n    service.nearbySearch(request, (results, status, pagination) => {\n      if (status === google.maps.places.PlacesServiceStatus.OK) {\n        for (var i = 0; i < 10; i++) {\n          createMarker(google, map, results[i]);\n        }\n        resolve(results, pagination);\n      } else {\n        reject(results, status);\n      }\n    })\n  });\n\n\n\n}\n\n\n\nexport function initAutocomplete(google, map) {\n  const input = document.getElementById(\"pac-input\")\n  const searchBox = new google.maps.places.SearchBox(input);\n  map.controls[google.maps.ControlPosition.TOP_CENTER].push(input);\n\n  // Bias the SearchBox results towards current map's viewport.\n  map.addListener(\"bounds_changed\", () => {\n    searchBox.setBounds(map.getBounds());\n    google.maps.event.trigger(map, 'resize')\n  });\n  let markers = [];\n  // Listen for the event fired when the user selects a prediction and retrieve\n  // more details for that place.\n  searchBox.addListener(\"places_changed\", () => {\n    const places = searchBox.getPlaces();\n\n    if (places.length === 0) {\n      return;\n    }\n    // Clear out the old markers.\n    markers.forEach((marker) => {\n      marker.setMap(null);\n    });\n    markers = [];\n    // For each place, get the icon, name and location.\n    const bounds = new google.maps.LatLngBounds();\n\n    for (let i = 0; i < places.length; i++) {\n      var place = places[i];\n      console.log(place)\n        if (!place.geometry || !place.geometry.location) {\n          console.log(\"Returned place contains no geometry\");\n          return;\n        }\n        // Create a marker for each place.\n        createMarker(google, map, place);\n  \n        if (place.geometry.viewport) {\n          // Only geocodes have viewport.\n          bounds.union(place.geometry.viewport);\n        } else {\n          bounds.extend(place.geometry.location);\n        }\n    }\n    map.fitBounds(bounds);\n  });\n}\n\n\n\n\n\n\nexport function createMarkers(google, map, places, collectionsList) {\n\n  if (!places || places.length === 0) {\n    return\n  } else {\n    //create empty LatLngBounds object   \n    var bounds = new google.maps.LatLngBounds();\n    for (var i = 0; i < places.length; i++) {\n      createMarker(google, map, places[i], collectionsList)\n      if (places[i].location) {\n        if (!isNaN(places[i].location.lat && !isNaN(places[i].location.lng))) {\n          bounds.extend(new google.maps.LatLng(places[i].location));\n        }\n      }  \n    }\n    //now fit the map to the newly inclusive bounds\n    map.fitBounds(bounds);\n  \n    //(optional) restore the zoom level after the map is done scaling\n    var listener = google.maps.event.addListener(map, \"idle\", function () {\n        map.setZoom(14);\n        google.maps.event.removeListener(listener);\n    });\n  }\n    \n}\n\n\nexport function createMarker(google, map, place, collectionsList) {\n  var position;\n\n  if (!place.geometry) {\n    if (!place.location) {\n      return\n    }\n    position = place.location;\n    console.log(\"Place.location\", position)\n  } else {\n    position = place.geometry.location;\n    console.log(place)\n  }\n\n  //if (!place.geometry || !place.geometry.location) return;\n\n  var marker = new google.maps.Marker({\n    map,\n    position: position\n  });\n  \n\n  google.maps.event.addListener(marker, \"click\", (function() {\n    return function() {\n      marker.infoWindow = new google.maps.InfoWindow();\n      var html = ReactDOMServer.renderToStaticMarkup(searchDetails(place, collectionsList));\n      map.panTo(marker.getPosition());\n      marker.infoWindow.setContent(html);\n      marker.infoWindow.open(map, marker);\n    }(marker);\n  }))\n\n  return {\n    position: position\n  };\n}\n\nexport function searchDetails(place, collections) {\n  function returnCorrectLocation(place) {\n    if (place.geometry!== undefined) {\n      return <div>Location (Lat, Lng): ({place.geometry.location.lat()}, {place.geometry.location.lng()})</div>\n    } else if (place.location !== undefined) {\n      return <div>Location (Lat, Lng): ({place.location.lat}, {place.location.lng})</div>\n    }\n  }\n  function returnCorrectWebsite(place) {\n    if (place.website) {\n      return <div>Website: {place.website}<br/></div>\n    } \n    return\n  }\n\n  return (\n    <div>\n      {console.log(\"place info in search Details: \", place)}\n      <div>Place Name: {place.name}</div>\n      {returnCorrectWebsite(place)}<br/>\n      <div>Copy info below and paste in \"Add to Place Collection\" tab to add to your collection</div>\n      <div>Place_id: {place.place_id}</div>\n      {returnCorrectLocation(place)}\n    </div>\n  )\n}\n\n\nexport function geoLocateUser(google, map) {\n  var infoWindow = new google.maps.InfoWindow();\n\n  const locationButton = document.createElement(\"button\");\n  locationButton.textContent = \"Pan to Current Location\"; \n  locationButton.classList.add(\"custom-map-control-button\");\n  map.controls[google.maps.ControlPosition.TOP_CENTER].push(locationButton);\n\n  locationButton.addEventListener(\"click\", () => {\n    // Try HTML5 geolocation.\n    if (navigator.geolocation) {\n      navigator.geolocation.getCurrentPosition(\n        (position) => {\n          const pos = {\n            lat: position.coords.latitude,\n            lng: position.coords.longitude,\n          };\n          infoWindow.setPosition(pos);\n          infoWindow.setContent(\"Your location\");\n          //infoWindow.open(map);\n          map.setCenter(pos);\n        },\n        () => {\n          handleLocationError(true, infoWindow, map.getCenter());\n        }\n      );\n    } else {\n      // Browser doesn't support Geolocation\n      handleLocationError(false, infoWindow, map.getCenter());\n    }\n  });\n\n  function handleLocationError(browserHasGeolocation, infoWindow, pos) {\n    infoWindow.setPosition(pos);\n    infoWindow.setContent(\n      browserHasGeolocation\n        ? \"Error: The Geolocation service failed.\"\n        : \"Error: Your browser doesn't support geolocation.\"\n    );\n    infoWindow.open(map);\n  }\n}\n\n\n\n/*\n * getDetails\n * Get details from the Google API about one specific place.\n */\nexport function getDetails(google, map, placeId) {\n  return new Promise((resolve, reject) => {\n    const service = new google.maps.places.PlacesService(map);\n\n    const request = {\n      placeId: placeId\n    }\n\n    service.getDetails(request, (place, status) => {\n      if (status !== google.maps.places.PlacesServiceStatus.OK) {\n        console.log(\"status!== OK in getDetails. Request is here: \", request)\n        return reject(status);\n      } else {\n        resolve(place);\n      }\n    })\n  })\n}\n"]},"metadata":{},"sourceType":"module"}