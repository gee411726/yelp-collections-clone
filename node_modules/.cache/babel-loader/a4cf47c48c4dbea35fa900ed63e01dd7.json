{"ast":null,"code":"import { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nvar _jsxFileName = \"/Users/bgee/Desktop/Web App Projects/yelp-collections-clone-project/src/views/Detail/Detail.js\";\nimport React from 'react';\nimport { getDetails } from '../../utils/googleApiHelpers';\nimport styles from './styles.module.css';\nimport axios from 'axios';\nvar port = process.env.PORT || 5000;\nvar host = process.env.HOST || '0.0.0.0';\nexport class Detail extends React.Component {\n  constructor(props, context) {\n    super(props, context);\n\n    this.closeDetails = () => {\n      this.setState({\n        showDetails: false,\n        place: undefined\n      });\n    };\n\n    this.deletePlaceFromCollection = () => {\n      if (window.confirm(\"confirm you want to delete this place from the collection\")) {\n        const request = {\n          collectionName: this.props.currentCollectionName,\n          place_id: this.props.placeId\n        };\n        axios.post(`https://gentle-tundra-70710.herokuapp.com/api/collections/delete/place`, request).then(res => console.log(res.data)).catch(err => console.log(err));\n        window.location = '/';\n      }\n    };\n\n    this.showDetails = this.showDetails.bind(this);\n    this.closeDetails = this.closeDetails.bind(this);\n    this.deletePlaceFromCollection = this.deletePlaceFromCollection.bind(this);\n    this.state = {\n      place: {},\n      location: {},\n      showDetails: false\n    };\n  }\n\n  componentDidMount() {\n    if (this.props.map) {\n      this.getDetails(this.props.map);\n    }\n  }\n\n  componentDidUpdate(prevProps, prevState) {\n    // getDetails sets state to place that is returned from function\n    // showDetails of that place after we get it\n    if (this.props.map && (prevProps.map !== this.props.map || prevProps.placeId !== this.props.placeId)) {\n      this.getDetails(this.props.map);\n      this.setState({\n        showDetails: true\n      });\n    } // showDetails if prev place differs from current \n\n\n    if (this.state.place && prevState.place !== this.state.place) {\n      this.setState({\n        showDetails: true\n      }); // hideDetails if we changed to no place in state\n    } else if (!this.state.place && prevState.place !== this.state.place) {\n      this.setState({\n        showDetails: false,\n        place: {}\n      });\n    }\n  }\n\n  getDetails(map) {\n    const {\n      google\n    } = this.props;\n    const placeId = this.props.placeId;\n\n    if (placeId) {\n      getDetails(google, map, placeId).then(place => {\n        const {\n          location\n        } = place.geometry;\n        const loc = {\n          lat: location.lat(),\n          lng: location.lng()\n        };\n        this.setState({\n          place: place,\n          location: loc\n        });\n      }).catch(err => console.log(\"error: \", err));\n    }\n  }\n\n  renderPhotos(place) {\n    if (!place.photos || place.photos.length === 0) return;\n    const cfg = {\n      maxWidth: 100,\n      maxHeight: 100\n    };\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: styles.photoStrip,\n      children: place.photos.map(p => {\n        const url = `${p.getUrl(cfg)}.png`;\n        return /*#__PURE__*/_jsxDEV(\"img\", {\n          src: url,\n          alt: \"unable to find img\"\n        }, url, false, {\n          fileName: _jsxFileName,\n          lineNumber: 83,\n          columnNumber: 17\n        }, this);\n      })\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 80,\n      columnNumber: 13\n    }, this);\n  }\n\n  showDetails() {\n    const {\n      place\n    } = this.state;\n\n    if (this.state.showDetails === true && 'place_id' in this.state.place) {\n      return /*#__PURE__*/_jsxDEV(\"div\", {\n        children: [/*#__PURE__*/_jsxDEV(\"button\", {\n          className: styles.closeDetail,\n          onClick: this.closeDetails,\n          children: /*#__PURE__*/_jsxDEV(\"h1\", {\n            children: \"X\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 95,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 94,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: styles.body,\n          children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n            children: place.name\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 98,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"h2\", {\n            children: [\"Address: \", place.formatted_address]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 99,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"h2\", {\n            children: [\"Current Status: \", place.business_status]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 100,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"h2\", {\n            children: [\"Phone Number: \", place.formatted_phone_number]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 101,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"h2\", {\n            children: /*#__PURE__*/_jsxDEV(\"u\", {\n              children: /*#__PURE__*/_jsxDEV(\"a\", {\n                href: place.website,\n                children: \"Website\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 102,\n                columnNumber: 20\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 102,\n              columnNumber: 17\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 102,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"h2\", {\n            children: [\"Comments: \", this.props.DBPlace.comments]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 103,\n            columnNumber: 14\n          }, this), this.renderPhotos(this.state.place)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 97,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: this.deletePlaceFromCollection,\n          children: \"Delete from collection\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 107,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 93,\n        columnNumber: 9\n      }, this);\n    } else if (this.state.showDetails === true && this.state.place === undefined) {\n      return /*#__PURE__*/_jsxDEV(\"div\", {\n        children: [/*#__PURE__*/_jsxDEV(\"button\", {\n          className: styles.closeDetail,\n          onClick: this.closeDetails,\n          children: /*#__PURE__*/_jsxDEV(\"h1\", {\n            children: \"X\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 114,\n            columnNumber: 15\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 113,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"h2\", {\n          children: \"There are currently no places in this collection\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 116,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 112,\n        columnNumber: 11\n      }, this);\n    }\n  }\n\n  render() {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: styles.details,\n      children: this.showDetails()\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 145,\n      columnNumber: 7\n    }, this);\n  }\n\n}\nexport default Detail;","map":{"version":3,"sources":["/Users/bgee/Desktop/Web App Projects/yelp-collections-clone-project/src/views/Detail/Detail.js"],"names":["React","getDetails","styles","axios","port","process","env","PORT","host","HOST","Detail","Component","constructor","props","context","closeDetails","setState","showDetails","place","undefined","deletePlaceFromCollection","window","confirm","request","collectionName","currentCollectionName","place_id","placeId","post","then","res","console","log","data","catch","err","location","bind","state","componentDidMount","map","componentDidUpdate","prevProps","prevState","google","geometry","loc","lat","lng","renderPhotos","photos","length","cfg","maxWidth","maxHeight","photoStrip","p","url","getUrl","closeDetail","body","name","formatted_address","business_status","formatted_phone_number","website","DBPlace","comments","render","details"],"mappings":"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","sourcesContent":["\nimport React from 'react'\nimport { getDetails } from '../../utils/googleApiHelpers'\nimport styles from './styles.module.css'\nimport axios from 'axios';\n\n\nvar port = process.env.PORT || 5000;\nvar host = process.env.HOST || '0.0.0.0';\n\nexport class Detail extends React.Component {\n\n  constructor(props, context) {\n    super(props, context)\n\n    this.showDetails = this.showDetails.bind(this);\n    this.closeDetails = this.closeDetails.bind(this);\n    this.deletePlaceFromCollection = this.deletePlaceFromCollection.bind(this);\n\n    this.state = {\n      place: {},\n      location: {},\n      showDetails: false\n    }\n  }\n\n  componentDidMount() {\n    if (this.props.map) {\n      this.getDetails(this.props.map)\n    }\n  }\n\n  componentDidUpdate(prevProps, prevState) {\n    // getDetails sets state to place that is returned from function\n    // showDetails of that place after we get it\n    if (this.props.map &&\n        (prevProps.map !== this.props.map ||\n         prevProps.placeId !== this.props.placeId)) {\n      this.getDetails(this.props.map);\n      this.setState({showDetails: true})\n    }\n    // showDetails if prev place differs from current \n    if (this.state.place && prevState.place !== this.state.place ) {\n      this.setState({showDetails: true})\n    // hideDetails if we changed to no place in state\n    } else if (!this.state.place && prevState.place !== this.state.place) {\n      this.setState({\n        showDetails: false,\n        place: {}\n      })\n    }\n  }\n  \n  getDetails(map) {\n    const { google } = this.props; \n    const placeId = this.props.placeId;\n\n    if (placeId) {\n      getDetails(google, map, placeId)\n      .then((place) => {\n        const {location} = place.geometry; \n        const loc = {\n          lat: location.lat(),\n          lng: location.lng()\n        }\n        this.setState({\n          place: place,\n          location: loc,\n        })\n      })\n      .catch(err => console.log(\"error: \", err))\n    }\n  }\n\n\n  renderPhotos(place) {\n    if (!place.photos || place.photos.length === 0) return;\n\n    const cfg = {maxWidth: 100, maxHeight: 100}\n    return (<div className={styles.photoStrip}>\n      {place.photos.map(p => {\n        const url = `${p.getUrl(cfg)}.png`\n        return (<img key={url} src={url} alt={\"unable to find img\"}/>)\n      })}\n    </div>)\n  }\n\n  showDetails() {\n    const {place} = this.state; \n\n    if (this.state.showDetails === true && 'place_id' in this.state.place) {\n      return (\n        <div>\n          <button className={styles.closeDetail} onClick={this.closeDetails}>\n            <h1>X</h1>\n          </button>\n          <div className={styles.body}>\n            <h2>{place.name}</h2> \n            <h2>Address: {place.formatted_address}</h2>\n            <h2>Current Status: {place.business_status}</h2>\n            <h2>Phone Number: {place.formatted_phone_number}</h2>\n            <h2><u><a href={place.website}>Website</a></u></h2>\n            {<h2>Comments: {this.props.DBPlace.comments}</h2>}\n            {this.renderPhotos(this.state.place)}\n          </div>\n\n          <button onClick={this.deletePlaceFromCollection}>Delete from collection</button>\n        </div>\n      )\n    } else if (this.state.showDetails === true && this.state.place === undefined) {\n        return (\n          <div>\n            <button className={styles.closeDetail} onClick={this.closeDetails}>\n              <h1>X</h1>\n            </button>\n            <h2>There are currently no places in this collection</h2>\n          </div>\n        )\n    }\n  }\n\n  closeDetails = () => {\n    this.setState({\n      showDetails: false,\n      place: undefined\n    })\n  }\n\n  deletePlaceFromCollection = () => {\n    if (window.confirm(\"confirm you want to delete this place from the collection\")) {\n      const request = {\n        collectionName: this.props.currentCollectionName,\n        place_id: this.props.placeId\n      }\n      axios.post(`https://gentle-tundra-70710.herokuapp.com/api/collections/delete/place`, request)\n      .then(res => console.log(res.data))\n      .catch(err => console.log(err)); \n  \n      window.location = '/'\n    }\n  }\n\n  render() {\n    return (\n      <div className={styles.details}>\n        {this.showDetails()}\n      </div>\n    )\n  }\n}\n\nexport default Detail"]},"metadata":{},"sourceType":"module"}